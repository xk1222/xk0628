# 626 换座位

* 题目
小美是一所中学的信息科技老师，她有一张seat 座位表，平时用来储存学生名字和与他们相对应的座位id。其中纵列的 id 是连续递增的小美想改变相邻俩学生的座位。  
你能不能帮她写一个 SQL query 来输出小美想要的结果呢？   
示例：   
+---------+---------+   
|    id   | student |   
+---------+---------+   
|    1    | Abbot   |   
|    2    | Doris   |   
|    3    | Emerson |   
|    4    | Green   |   
|    5    | Jeames  |   
+---------+---------+   
假如数据输入的是上表，则输出结果如下：   
+---------+---------+   
|    id   | student |  
+---------+---------+  
|    1    | Doris   |   
|    2    | Abbot   |   
|    3    | Green   |   
|    4    | Emerson |   
|    5    | Jeames  |   
+---------+---------+   
注意：如果学生人数是奇数，则不需要改变最后一个同学的座位。   

---

* 解题思路
根据题意可知，比如在示例中，我们需要将Abbot和Emerson的id互换，Emerson和Green的id互换，而Jeames的id不变。也就是将id为n(n为奇数，且n不是最大的id)的学生和id为n+1的学生互换座位，最初我的想法是改变student那一列，互换学生的名字，后面我发现这样很麻烦，于是我改变思路，去改变id那一列，例如将1和2互换、3和4互换，最后再按照id进行降序。若id为奇数且该id为学生人数则不改变，若id为奇数且该id不为学生人数则id+1，若id为偶数则id+1。
* 题解
```sql
SELECT (CASE 
            WHEN MOD(id,2) = 1 AND id = (SELECT COUNT(*) FROM seat)
            THEN id
            WHEN MOD(id,2) = 1 THEN id+1
            ElSE id-1
        END)as id,student    
FROM seat
ORDER BY id;
```




